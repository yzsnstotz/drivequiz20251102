# 🖥️ 本地界面测试指南

## ✅ 可以本地测试！

是的，您完全可以在本地进行界面测试。这是一个 Next.js 项目，支持本地开发服务器。

---

## 🚀 快速启动步骤

### 1. 确认环境变量配置

确保项目根目录有 `.env.local` 文件（已存在）：

```bash
# 检查文件是否存在
ls -la .env.local
```

`.env.local` 应该包含：
- `DATABASE_URL` - 数据库连接字符串
- `ADMIN_TOKEN` - 管理员 Token（如果需要测试管理员功能）
- `TZ` - 时区（建议 `UTC`）

### 2. 安装依赖（如果还没安装）

```bash
npm install
```

### 3. 启动开发服务器

```bash
npm run dev
```

启动后，您会看到类似输出：
```
  ▲ Next.js 15.0.0
  - Local:        http://localhost:3000
  - Network:      http://192.168.x.x:3000
```

### 4. 访问本地界面

在浏览器中打开：
- **用户界面**: http://localhost:3000
- **管理员界面**: http://localhost:3000/admin

---

## 📱 可测试的界面

### 用户界面

1. **首页** (`/`)
   - 欢迎横幅
   - 功能导航（课程学习、模拟考试、错题本、大乱斗）
   - 视频展示

2. **课程学习** (`/study`)
   - 题目练习界面

3. **模拟考试** (`/exam`)
   - 考试模式界面

4. **错题本** (`/mistakes`)
   - 错题回顾

5. **大乱斗** (`/royalbattle`)
   - 挑战模式

6. **附近商家** (`/nearby`)
   - 商家列表

7. **车辆信息** (`/cars`)
   - 车辆展示

8. **个人中心** (`/profile`)
   - 用户信息

### 管理员界面

1. **管理员登录** (`/admin/login`)
   - 需要管理员账号和 Token

2. **仪表板** (`/admin`)
   - 数据统计

3. **用户管理** (`/admin/users`)
   - 用户列表和管理

4. **题目管理** (`/admin/questions`)
   - 题目 CRUD 操作

5. **激活码管理** (`/admin/activation-codes`)
   - 激活码生成和管理

6. **管理员管理** (`/admin/admins`)
   - 管理员账号管理

7. **操作日志** (`/admin/operation-logs`)
   - 系统操作记录

---

## 🔍 测试检查清单

### 基础功能测试

- [ ] 首页加载正常，显示欢迎内容
- [ ] 功能导航按钮可点击
- [ ] 视频区域正常显示（如果有数据）
- [ ] 底部导航栏正常工作
- [ ] 页面路由跳转正常

### 数据相关测试

- [ ] API 接口能正常返回数据
- [ ] 数据库连接正常（检查 `/api/admin/diagnose`）
- [ ] 题目数据能正常加载
- [ ] 用户数据能正常显示

### 管理员功能测试

- [ ] 管理员登录页面可访问
- [ ] 登录功能正常工作
- [ ] 各管理页面可正常访问
- [ ] CRUD 操作正常

---

## 🛠️ 故障排查

### 问题 1: 页面显示 500 错误

**原因**: 数据库连接失败或环境变量未配置

**解决方案**:
1. 检查 `.env.local` 文件是否存在且包含 `DATABASE_URL`
2. 访问诊断端点：http://localhost:3000/api/admin/diagnose
3. 查看错误信息

### 问题 2: 页面显示空白

**原因**: 可能是 React 错误或 JavaScript 错误

**解决方案**:
1. 打开浏览器开发者工具（F12）
2. 查看 Console 标签页的错误信息
3. 查看 Network 标签页确认 API 请求是否成功

### 问题 3: 样式显示异常

**原因**: Tailwind CSS 未正确编译

**解决方案**:
1. 确认 `postcss.config.js` 和 `tailwind.config.js` 存在
2. 重启开发服务器：`npm run dev`

### 问题 4: API 请求失败

**原因**: 环境变量缺失或 API 路由错误

**解决方案**:
1. 检查 `.env.local` 中的相关环境变量
2. 查看服务器控制台的错误日志
3. 检查 API 路由文件是否存在

---

## 📊 诊断工具

### 1. 诊断 API

访问诊断端点查看系统状态：
```
http://localhost:3000/api/admin/diagnose
```

返回信息包括：
- 环境变量状态
- 数据库连接状态
- 表结构检查
- 错误详情

### 2. 浏览器开发者工具

- **Console**: 查看 JavaScript 错误和日志
- **Network**: 查看 API 请求状态
- **Elements**: 检查 DOM 结构和样式

### 3. 服务器日志

在运行 `npm run dev` 的终端中查看：
- 编译错误
- API 请求日志
- 数据库查询错误

---

## 🎯 测试建议

### 1. 功能测试流程

1. **基础导航测试**
   - 从首页开始，依次点击各个功能模块
   - 确认页面跳转正常
   - 确认返回按钮正常工作

2. **数据交互测试**
   - 测试题目加载
   - 测试答题功能
   - 测试数据保存

3. **响应式测试**
   - 调整浏览器窗口大小
   - 测试移动端视图（F12 → 设备工具栏）
   - 确认布局适配正常

### 2. 不同浏览器测试

建议在以下浏览器测试：
- Chrome/Edge（Chromium）
- Safari（macOS）
- Firefox

### 3. 性能测试

- 页面加载速度
- API 响应时间
- 图片加载优化

---

## 📝 注意事项

1. **环境变量安全**
   - `.env.local` 文件包含敏感信息，不要提交到 Git
   - 本地测试时使用测试数据，不要使用生产环境数据

2. **数据库连接**
   - 确保数据库可访问（Supabase 或其他 PostgreSQL）
   - 本地测试可以连接远程数据库，但注意网络延迟

3. **端口占用**
   - 默认端口是 3000
   - 如果被占用，Next.js 会自动使用下一个可用端口（3001, 3002...）

4. **热重载**
   - Next.js 支持热重载，修改代码后自动刷新
   - 如果热重载不工作，手动刷新浏览器

---

## 🎉 快速命令参考

```bash
# 启动开发服务器
npm run dev

# 构建生产版本（测试构建）
npm run build

# 运行生产服务器（测试构建结果）
npm run start

# 运行测试
npm test

# 运行测试 UI
npm run test:ui

# 代码检查
npm run lint
```

---

## 📚 相关文档

- [环境变量配置指南](./ENV_SETUP.md)
- [故障排除指南](../TROUBLESHOOTING.md)
- [测试指南](../TESTING_GUIDE.md)

---

**祝测试顺利！** 🚀

