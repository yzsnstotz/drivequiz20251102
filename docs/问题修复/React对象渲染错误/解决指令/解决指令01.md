@ä¿®å¤æŒ‡ä»¤å¤´05ç‰ˆï¼ˆç°ç”¨ï¼‰.md (1-171) 
ğŸ”§ Cursor ä¸€æ¬¡æ€§ä¿®å¤æŒ‡ä»¤

è¯·ä¸¥æ ¼æŒ‰æ­¥éª¤ä¿®æ”¹ä»£ç ï¼Œä¸è¦åšé£æ ¼æ€§é‡å†™ã€‚

1. é€‰ç”¨æ–¹æ¡ˆ

é€‰ç”¨è¯Šæ–­æŠ¥å‘Šä¸­çš„ã€Œæ–¹æ¡ˆ Aã€ï¼š

ä½¿ç”¨ getQuestionContentã€getQuestionOptions å¤„ç†å¤šè¯­è¨€å†…å®¹ï¼›

ä½¿ç”¨ useLanguage è·å–å½“å‰è¯­è¨€ï¼›

æ›´æ–° Question ç±»å‹ä»¥å…¼å®¹å¤šè¯­è¨€å¯¹è±¡ã€‚

æ˜ç¡® ä¸è¦ä½¿ç”¨æ–¹æ¡ˆ Bï¼ˆåœ¨ç»„ä»¶å†…éƒ¨æ‰‹å†™ç±»å‹åˆ¤æ–­é€»è¾‘ï¼‰ï¼Œé¿å…é€»è¾‘åˆ†æ•£å’Œé‡å¤ã€‚

2. ä¿®æ”¹ src/app/study/QuestionPage.tsx
2.1 æ·»åŠ /æ ¡æ­£å¯¼å…¥

åœ¨æ–‡ä»¶é¡¶éƒ¨ï¼ˆå…¶å®ƒ import ä¹‹åï¼‰æ·»åŠ æˆ–æ ¡æ­£ä»¥ä¸‹å¯¼å…¥ï¼ˆè‹¥å·²å­˜åœ¨åˆ™ä¿æŒå³å¯ï¼‰ï¼š

import { useLanguage } from '@/lib/i18n';
import { getQuestionContent, getQuestionOptions } from '@/lib/questionUtils';


ç›®çš„ï¼šä¸ src/components/QuestionPage.tsx ä½¿ç”¨åŒä¸€å¥—å·¥å…·å‡½æ•°å’Œè¯­è¨€ç®¡ç†ã€‚

2.2 æ›´æ–° Question æ¥å£ç±»å‹å®šä¹‰

åœ¨ src/app/study/QuestionPage.tsx ä¸­ï¼Œæ‰¾åˆ°æœ¬åœ°å®šä¹‰çš„ Question æ¥å£ï¼ˆè¯Šæ–­æŠ¥å‘Šä¸­å¤§æ¦‚åœ¨æ–‡ä»¶å‰éƒ¨ï¼‰ã€‚å°†å…¶æ›´æ–°ä¸ºå…¼å®¹å¤šè¯­è¨€å¯¹è±¡çš„ç‰ˆæœ¬ï¼š

interface Question {
  id: number;
  type: 'single' | 'multiple' | 'truefalse';
  content: string | { zh: string; en?: string; ja?: string; [key: string]: string | undefined };
  image?: string;
  options?: string[] | Array<{ zh: string; en?: string; ja?: string; [key: string]: string | undefined }>;
  correctAnswer: string | string[];
  explanation?: string | { zh: string; en?: string; ja?: string; [key: string]: string | undefined };
}


è¯´æ˜ï¼š

è¿™ä¸è¯Šæ–­æŠ¥å‘Šå»ºè®®ä¿æŒä¸€è‡´ï¼Œæ˜ç¡® content / options / explanation å¯èƒ½æ˜¯å­—ç¬¦ä¸²æˆ–å¤šè¯­è¨€å¯¹è±¡ã€‚

å¦‚æœé¡¹ç›®ä¸­å·²ç»æœ‰å…¬å…± Question ç±»å‹ä¸”æ›´åˆé€‚ï¼Œå¯æ”¹ä¸ºä»å…¬å…±ç±»å‹å¯¼å…¥ï¼Œä½†è¦ä¿è¯å­—æ®µç±»å‹åŒæ ·å…¼å®¹å¤šè¯­è¨€ JSONBã€‚

2.3 ä½¿ç”¨ useLanguage è·å–å½“å‰è¯­è¨€

åœ¨ QuestionPage ç»„ä»¶å‡½æ•°å†…éƒ¨ï¼Œé è¿‘å…¶ä»– hookï¼ˆå¦‚ useStateã€useEffectï¼‰çš„ä½ç½®ï¼Œæ·»åŠ ï¼š

const { language } = useLanguage();


è¦æ±‚ï¼š

ä¸è¦åœ¨å­ç»„ä»¶å†…éƒ¨é‡å¤è°ƒç”¨ï¼Œåªåœ¨æœ¬é¡µé¢ç»„ä»¶æ ¹éƒ¨è°ƒç”¨ä¸€æ¬¡ï¼Œç„¶åä¼ é€’ç»™éœ€è¦çš„é€»è¾‘ã€‚

2.4 ä¿®å¤é¢˜å¹²æ¸²æŸ“é€»è¾‘

é—®é¢˜ä»£ç ï¼ˆå½“å‰å†™æ³•ï¼Œå¤§è‡´ç±»ä¼¼ï¼‰ï¼š

<p className="text-gray-900 text-lg mb-4">{currentQuestion.content}</p>


è¯·æ›¿æ¢ä¸ºä½¿ç”¨å·¥å…·å‡½æ•°çš„å†™æ³•ï¼š

<p className="text-gray-900 text-lg mb-4">
  {getQuestionContent(currentQuestion.content as any, language) || ''}
</p>


è¯´æ˜ï¼š

getQuestionContent ä¼šè‡ªåŠ¨å…¼å®¹ä¸¤ç§æ•°æ®ç»“æ„ï¼šå­—ç¬¦ä¸² & å¤šè¯­è¨€å¯¹è±¡ã€‚

ä½¿ç”¨ || '' é¿å… null ç›´æ¥æ¸²æŸ“ã€‚

2.5 ä¿®å¤é€‰é¡¹æ¸²æŸ“é€»è¾‘

é—®é¢˜ä»£ç ï¼ˆå½“å‰å†™æ³•ï¼Œå¤§è‡´ç±»ä¼¼ï¼‰ï¼š

{currentQuestion.options?.map((option, index) => {
  const optionLabel = String.fromCharCode(65 + index);
  const isSelected = Array.isArray(selectedAnswer)
    ? selectedAnswer.includes(optionLabel)
    : selectedAnswer === optionLabel;

  return (
    <button
      key={index}
      onClick={() => handleAnswer(optionLabel)}
      className={`w-full p-4 rounded-xl text-left ${
        isSelected
          ? 'bg-blue-50 border-2 border-blue-600'
          : 'bg-gray-50 border-2 border-transparent'
      }`}
    >
      {option}
    </button>
  );
})}


è¯·æ•´ä½“æ›¿æ¢ä¸ºä½¿ç”¨ getQuestionOptions çš„å†™æ³•ï¼š

{getQuestionOptions(currentQuestion.options as any, language).map((option, index) => {
  const optionLabel = String.fromCharCode(65 + index);
  const isSelected = Array.isArray(selectedAnswer)
    ? selectedAnswer.includes(optionLabel)
    : selectedAnswer === optionLabel;

  return (
    <button
      key={index}
      onClick={() => handleAnswer(optionLabel)}
      className={`w-full p-4 rounded-xl text-left ${
        isSelected
          ? 'bg-blue-50 border-2 border-blue-600'
          : 'bg-gray-50 border-2 border-transparent'
      }`}
    >
      {option}
    </button>
  );
})}


è¯´æ˜ï¼š

getQuestionOptions å†…éƒ¨å·²ç»å¤„ç†äº†ã€Œæ—§æ ¼å¼å­—ç¬¦ä¸²æ•°ç»„ã€å’Œã€Œæ–°æ ¼å¼å¤šè¯­è¨€å¯¹è±¡æ•°ç»„ã€ä¸¤ç§æƒ…å†µã€‚

è¿™æ ·å¯ä»¥ä¿è¯ option å§‹ç»ˆæ˜¯å­—ç¬¦ä¸²ï¼Œä¸ä¼šå†å‡ºç° React æ¸²æŸ“å¯¹è±¡çš„é”™è¯¯ã€‚

2.6 ä¿®å¤è§£æï¼ˆexplanationï¼‰æ¸²æŸ“é€»è¾‘

é—®é¢˜ä»£ç ï¼ˆå½“å‰å†™æ³•ï¼Œå¤§è‡´ç±»ä¼¼ï¼‰ï¼š

{currentQuestion.explanation && (
  <p className="text-gray-700">{currentQuestion.explanation}</p>
)}


è¯·æ›¿æ¢ä¸ºï¼š

{currentQuestion.explanation && (
  <p className="text-gray-700">
    {getQuestionContent(currentQuestion.explanation as any, language) || ''}
  </p>
)}


è¯´æ˜ï¼š

ä¸ç»„ä»¶ç‰ˆ src/components/QuestionPage.tsx å®Œå…¨å¯¹é½ï¼Œé¿å…ç›´æ¥æ¸²æŸ“å¯¹è±¡ã€‚

2.7 æ¸…ç† & é˜²å›å½’æ£€æŸ¥

å®Œæˆä»¥ä¸Šä¿®æ”¹åï¼Œåœ¨ src/app/study/QuestionPage.tsx ä¸­ï¼š

å…¨æ–‡ä»¶æœç´¢ currentQuestion.content / currentQuestion.options / currentQuestion.explanationï¼š

ç¡®ä¿ æ²¡æœ‰å†å‡ºç°ç›´æ¥ä½œä¸º JSX å­èŠ‚ç‚¹æ¸²æŸ“çš„ç”¨æ³•ï¼Œä¾‹å¦‚ï¼š

{currentQuestion.content}

{option}ï¼ˆå¦‚æœ option ä»å¯èƒ½æ˜¯å¯¹è±¡ï¼‰

{currentQuestion.explanation}

è¿™äº›ä½ç½®éƒ½å¿…é¡»é€šè¿‡ getQuestionContent / getQuestionOptions å¤„ç†åå†æ¸²æŸ“ã€‚

å¯¹ç…§ src/components/QuestionPage.tsx ä¸­çš„ç”¨æ³•ï¼Œç¡®è®¤ä¸‰å¤„å…³é”®é€»è¾‘å®Œå…¨ä¸€è‡´ï¼ˆé¢˜å¹²ã€é€‰é¡¹ã€è§£æï¼‰ã€‚