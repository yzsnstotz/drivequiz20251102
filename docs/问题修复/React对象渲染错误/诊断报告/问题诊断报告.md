# React å¯¹è±¡æ¸²æŸ“é”™è¯¯è¯Šæ–­æŠ¥å‘Š

**æŠ¥å‘Šæ—¥æœŸ**: 2025-02-20  
**é—®é¢˜ID**: REACT-20250220-001

---

## ğŸ“Œ ç¬¬ä¸€éƒ¨åˆ†ï¼šé—®é¢˜æ¦‚è¦ï¼ˆSummaryï¼‰

| å­—æ®µ | å¡«å†™å†…å®¹ |
|------|----------|
| **é—®é¢˜åç§°** | React ç»„ä»¶ä¸­ç›´æ¥æ¸²æŸ“å¯¹è±¡å¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ï¼š"Objects are not valid as a React child" |
| **é—®é¢˜ç­‰çº§** | High |
| **è§¦å‘æ—¶é—´** | 2025-02-20 |
| **è§¦å‘ç¯å¢ƒ** | Development / Production |
| **ç›¸å…³æ¨¡å—** | frontend / study / QuestionPage |
| **å½“å‰çŠ¶æ€** | å¯å¤ç° |

---

## ğŸ“Œ ç¬¬äºŒéƒ¨åˆ†ï¼šå¤ç°è·¯å¾„ï¼ˆReproduce Stepsï¼‰

**å‰ç«¯æ“ä½œæ­¥éª¤**ï¼š
1. å¯åŠ¨ Next.js å¼€å‘æœåŠ¡å™¨
2. è®¿é—®å­¦ä¹ é¡µé¢ï¼ˆ`/study` æˆ–ç›¸å…³è·¯ç”±ï¼‰
3. é€‰æ‹©ä»»æ„é¢˜ç›®é›†è¿›å…¥é¢˜ç›®ç»ƒä¹ é¡µé¢
4. å¦‚æœé¢˜ç›®æ•°æ®åŒ…å«å¤šè¯­è¨€å¯¹è±¡æ ¼å¼ï¼ˆå¦‚ `content: {zh: "...", en: "..."}`ï¼‰ï¼Œé¡µé¢ä¼šç«‹å³æŠ¥é”™

**è§¦å‘ç‚¹**ï¼š
- å½“ `QuestionPage` ç»„ä»¶å°è¯•ç›´æ¥æ¸²æŸ“ `currentQuestion.content`ã€`currentQuestion.options` æˆ– `currentQuestion.explanation` æ—¶
- å¦‚æœè¿™äº›å­—æ®µæ˜¯å¤šè¯­è¨€å¯¹è±¡æ ¼å¼ï¼ˆJSONB å¯¹è±¡ï¼‰ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²ï¼ŒReact æ— æ³•ç›´æ¥æ¸²æŸ“å¯¹è±¡

**é”™è¯¯å †æ ˆ**ï¼š
```
react-dom-client.development.js:5254 Uncaught Error: Objects are not valid as a React child (found: object with keys {}). If you meant to render a collection of children, use an array instead.

    at throwOnInvalidObjectType (react-dom-client.development.js:5254:13)
    at createChild (react-dom-client.development.js:5532:11)
    at reconcileChildrenArray (react-dom-client.development.js:5801:25)
    at reconcileChildFibersImpl (react-dom-client.development.js:6124:30)
    ...
```

**æ“ä½œç³»ç»Ÿ / æµè§ˆå™¨ / Node ç‰ˆæœ¬**ï¼š
- macOS / Chrome / Node.js 18+
- Next.js version: 15.5.6 (Webpack)

---

## ğŸ“Œ ç¬¬ä¸‰éƒ¨åˆ†ï¼šå®é™…è¾“å‡ºï¼ˆActual Behaviorï¼‰

**æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯**ï¼š
```
Uncaught Error: Objects are not valid as a React child (found: object with keys {}). If you meant to render a collection of children, use an array instead.
```

**é¡µé¢è¡¨ç°**ï¼š
- é¡µé¢æ— æ³•æ­£å¸¸æ¸²æŸ“
- é¢˜ç›®å†…å®¹åŒºåŸŸæ˜¾ç¤ºç©ºç™½æˆ–æŠ¥é”™
- æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤ºä¸Šè¿°é”™è¯¯ä¿¡æ¯

**HTTP çŠ¶æ€ç **ï¼š200ï¼ˆé¡µé¢æ­£å¸¸åŠ è½½ï¼Œä½†å‰ç«¯æ¸²æŸ“å¤±è´¥ï¼‰  
**å“åº”å†…å®¹**ï¼šHTML æ­£å¸¸è¿”å›ï¼Œä½† React ç»„ä»¶æ¸²æŸ“å¤±è´¥

---

## ğŸ“Œ ç¬¬å››éƒ¨åˆ†ï¼šæœŸæœ›è¡Œä¸ºï¼ˆExpected Behaviorï¼‰

**æœŸæœ›è¡Œä¸º**ï¼š
1. å½“é¢˜ç›®æ•°æ®æ˜¯å¤šè¯­è¨€å¯¹è±¡æ ¼å¼æ—¶ï¼Œåº”è¯¥ä½¿ç”¨ `getQuestionContent` å’Œ `getQuestionOptions` å·¥å…·å‡½æ•°æ¥æå–å¯¹åº”è¯­è¨€çš„å†…å®¹
2. ç»„ä»¶åº”è¯¥èƒ½å¤Ÿæ­£ç¡®å¤„ç†ä»¥ä¸‹ä¸¤ç§æ•°æ®æ ¼å¼ï¼š
   - æ—§æ ¼å¼ï¼š`content: "é¢˜ç›®å†…å®¹"`ï¼ˆå­—ç¬¦ä¸²ï¼‰
   - æ–°æ ¼å¼ï¼š`content: {zh: "ä¸­æ–‡å†…å®¹", en: "English content"}`ï¼ˆå¤šè¯­è¨€å¯¹è±¡ï¼‰
3. æ— è®ºæ•°æ®æ ¼å¼å¦‚ä½•ï¼Œç»„ä»¶éƒ½åº”è¯¥æ­£å¸¸æ¸²æŸ“ï¼Œä¸æŠ¥é”™
4. åº”è¯¥æ ¹æ®å½“å‰ç”¨æˆ·é€‰æ‹©çš„è¯­è¨€ï¼ˆ`language`ï¼‰æ˜¾ç¤ºå¯¹åº”è¯­è¨€çš„å†…å®¹

---

## ğŸ“Œ ç¬¬äº”éƒ¨åˆ†ï¼šä»£ç å®šä½ï¼ˆCode Snapshotï¼‰

### ç›¸å…³æ–‡ä»¶åˆ—è¡¨

1. **`src/app/study/QuestionPage.tsx`**
   - ç¬¬ 291 è¡Œï¼šç›´æ¥æ¸²æŸ“ `currentQuestion.content`ï¼ˆé—®é¢˜ä»£ç ï¼‰
   - ç¬¬ 319 è¡Œï¼šç›´æ¥ä½¿ç”¨ `currentQuestion.options?.map`ï¼ˆé—®é¢˜ä»£ç ï¼‰
   - ç¬¬ 383 è¡Œï¼šç›´æ¥æ¸²æŸ“ `currentQuestion.explanation`ï¼ˆé—®é¢˜ä»£ç ï¼‰

2. **`src/components/QuestionPage.tsx`**
   - ç¬¬ 256 è¡Œï¼šæ­£ç¡®ä½¿ç”¨ `getQuestionContent(currentQuestion.content, language)`ï¼ˆæ­£ç¡®ç¤ºä¾‹ï¼‰
   - ç¬¬ 284 è¡Œï¼šæ­£ç¡®ä½¿ç”¨ `getQuestionOptions(currentQuestion.options, language)`ï¼ˆæ­£ç¡®ç¤ºä¾‹ï¼‰
   - ç¬¬ 348 è¡Œï¼šæ­£ç¡®ä½¿ç”¨ `getQuestionContent(currentQuestion.explanation as any, language)`ï¼ˆæ­£ç¡®ç¤ºä¾‹ï¼‰

3. **`src/lib/questionUtils.ts`**
   - ç¬¬ 21-43 è¡Œï¼š`getQuestionContent` å‡½æ•°ï¼ˆå·¥å…·å‡½æ•°ï¼‰
   - ç¬¬ 51-68 è¡Œï¼š`getQuestionOptions` å‡½æ•°ï¼ˆå·¥å…·å‡½æ•°ï¼‰

### å…³é”®å‡½æ•°ä»£ç ç‰‡æ®µ

#### é—®é¢˜ä»£ç ï¼ˆsrc/app/study/QuestionPage.tsxï¼‰

```290:291:src/app/study/QuestionPage.tsx
        <div className="mb-6">
          <p className="text-gray-900 text-lg mb-4">{currentQuestion.content}</p>
```

**é—®é¢˜åˆ†æ**ï¼š
- ç›´æ¥æ¸²æŸ“ `currentQuestion.content`ï¼Œå¦‚æœ `content` æ˜¯å¤šè¯­è¨€å¯¹è±¡ï¼ˆå¦‚ `{zh: "...", en: "..."}`ï¼‰ï¼ŒReact æ— æ³•æ¸²æŸ“å¯¹è±¡ï¼Œå¯¼è‡´æŠ¥é”™

```318:339:src/app/study/QuestionPage.tsx
          ) : (
            <div className="space-y-3">
              {currentQuestion.options?.map((option, index) => {
                const optionLabel = String.fromCharCode(65 + index);
                const isSelected = Array.isArray(selectedAnswer)
                  ? selectedAnswer.includes(optionLabel)
                  : selectedAnswer === optionLabel;

                return (
                  <button
                    key={index}
                    onClick={() => handleAnswer(optionLabel)}
                    className={`w-full p-4 rounded-xl text-left ${
                      isSelected
                        ? 'bg-blue-50 border-2 border-blue-600'
                        : 'bg-gray-50 border-2 border-transparent'
                    }`}
                  >
                    {option}
                  </button>
                );
              })}
            </div>
          )}
```

**é—®é¢˜åˆ†æ**ï¼š
- ç›´æ¥ä½¿ç”¨ `currentQuestion.options?.map`ï¼Œå¦‚æœ `options` æ˜¯å¤šè¯­è¨€å¯¹è±¡æ•°ç»„ï¼ˆå¦‚ `[{zh: "é€‰é¡¹A", en: "Option A"}, ...]`ï¼‰ï¼Œ`option` ä¼šæ˜¯å¯¹è±¡ï¼Œæ— æ³•ç›´æ¥æ¸²æŸ“

```382:384:src/app/study/QuestionPage.tsx
            {currentQuestion.explanation && (
              <p className="text-gray-700">{currentQuestion.explanation}</p>
            )}
```

**é—®é¢˜åˆ†æ**ï¼š
- ç›´æ¥æ¸²æŸ“ `currentQuestion.explanation`ï¼Œå¦‚æœ `explanation` æ˜¯å¤šè¯­è¨€å¯¹è±¡ï¼ˆå¦‚ `{zh: "...", en: "..."}`ï¼‰ï¼ŒReact æ— æ³•æ¸²æŸ“å¯¹è±¡ï¼Œå¯¼è‡´æŠ¥é”™

#### æ­£ç¡®ä»£ç ç¤ºä¾‹ï¼ˆsrc/components/QuestionPage.tsxï¼‰

```255:256:src/components/QuestionPage.tsx
        <div className="mb-6">
          <p className="text-gray-900 text-lg mb-4">{getQuestionContent(currentQuestion.content, language) || ''}</p>
```

**æ­£ç¡®åšæ³•**ï¼š
- ä½¿ç”¨ `getQuestionContent` å‡½æ•°æå–å¯¹åº”è¯­è¨€çš„å†…å®¹ï¼Œç¡®ä¿è¿”å›å­—ç¬¦ä¸²

```283:303:src/components/QuestionPage.tsx
          ) : (
            <div className="space-y-3">
              {getQuestionOptions(currentQuestion.options, language).map((option, index) => {
                const optionLabel = String.fromCharCode(65 + index);
                const isSelected = Array.isArray(selectedAnswer)
                  ? selectedAnswer.includes(optionLabel)
                  : selectedAnswer === optionLabel;

                return (
                  <button
                    key={index}
                    onClick={() => handleAnswer(optionLabel)}
                    className={`w-full p-4 rounded-xl text-left ${
                      isSelected
                        ? 'bg-blue-50 border-2 border-blue-600'
                        : 'bg-gray-50 border-2 border-transparent'
                    }`}
                  >
                    {option}
                  </button>
                );
              })}
            </div>
          )}
```

**æ­£ç¡®åšæ³•**ï¼š
- ä½¿ç”¨ `getQuestionOptions` å‡½æ•°æå–å¯¹åº”è¯­è¨€çš„é€‰é¡¹æ•°ç»„ï¼Œç¡®ä¿è¿”å›å­—ç¬¦ä¸²æ•°ç»„

```347:349:src/components/QuestionPage.tsx
            {currentQuestion.explanation && (
              <p className="text-gray-700">{getQuestionContent(currentQuestion.explanation as any, language) || ''}</p>
            )}
```

**æ­£ç¡®åšæ³•**ï¼š
- ä½¿ç”¨ `getQuestionContent` å‡½æ•°æå–å¯¹åº”è¯­è¨€çš„è§£æå†…å®¹ï¼Œç¡®ä¿è¿”å›å­—ç¬¦ä¸²

#### å·¥å…·å‡½æ•°ï¼ˆsrc/lib/questionUtils.tsï¼‰

```21:43:src/lib/questionUtils.ts
export function getQuestionContent(
  content: string | QuestionContent,
  locale: Language = 'zh'
): string | null {
  if (typeof content === 'string') {
    // å…¼å®¹æ—§æ ¼å¼ï¼šå•è¯­è¨€å­—ç¬¦ä¸²
    return content;
  }
  
  // æ–°æ ¼å¼ï¼šå¤šè¯­è¨€å¯¹è±¡
  // åªè¿”å›ç›®æ ‡è¯­è¨€ï¼ˆå¿…é¡»æ˜¯æœ‰æ•ˆçš„éç©ºå­—ç¬¦ä¸²ï¼Œä¸”ä¸æ˜¯å ä½ç¬¦ï¼‰ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿”å›null
  const targetLangValue = content[locale];
  // æ£€æŸ¥æ˜¯å¦æ˜¯å ä½ç¬¦ï¼ˆä»¥ [EN] æˆ– [JA] å¼€å¤´ï¼‰
  const isPlaceholder = targetLangValue && typeof targetLangValue === 'string' && 
    (targetLangValue.trim().startsWith('[EN]') || targetLangValue.trim().startsWith('[JA]'));
  
  if (targetLangValue && typeof targetLangValue === 'string' && targetLangValue.trim().length > 0 && !isPlaceholder) {
    return targetLangValue;
  }
  
  // å¦‚æœç›®æ ‡è¯­è¨€ä¸å­˜åœ¨ã€ä¸ºç©ºæˆ–æ˜¯å ä½ç¬¦ï¼Œè¿”å›nullï¼ˆä¸ä½¿ç”¨ä»»ä½•å¤‡ç”¨æªæ–½ï¼‰
  return null;
}
```

```51:68:src/lib/questionUtils.ts
export function getQuestionOptions(
  options?: string[] | Array<{ zh: string; en?: string; ja?: string; [key: string]: string | undefined }>,
  locale: Language = 'zh'
): string[] {
  if (!options || options.length === 0) {
    return [];
  }
  
  // å¦‚æœç¬¬ä¸€ä¸ªé€‰é¡¹æ˜¯å­—ç¬¦ä¸²ï¼Œè¯´æ˜æ˜¯æ—§æ ¼å¼
  if (typeof options[0] === 'string') {
    return options as string[];
  }
  
  // æ–°æ ¼å¼ï¼šå¤šè¯­è¨€å¯¹è±¡æ•°ç»„
  return (options as Array<QuestionContent>).map(option => 
    getQuestionContent(option, locale)
  ).filter((val): val is string => val !== null);
}
```

---

## ğŸ“Œ ç¬¬å…­éƒ¨åˆ†ï¼šé…ç½®ä¸ç¯å¢ƒï¼ˆConfig & Envï¼‰

### å½“å‰ä½¿ç”¨çš„ç¯å¢ƒå˜é‡

```
NEXT_PUBLIC_APP_BASE_URL=http://localhost:3000
```

### æ•°æ®åº“ç»“æ„

- **`questions` è¡¨**ï¼š
  - `content` JSONBï¼šå¤šè¯­è¨€é¢˜ç›®å†…å®¹ `{"zh": "...", "en": "...", "ja": "..."}` æˆ–å­—ç¬¦ä¸²
  - `options` JSONBï¼šå¤šè¯­è¨€é€‰é¡¹æ•°ç»„ `[{"zh": "...", "en": "..."}, ...]` æˆ–å­—ç¬¦ä¸²æ•°ç»„
  - `explanation` JSONBï¼šå¤šè¯­è¨€è§£æè¯´æ˜ `{"zh": "...", "en": "...", "ja": "..."}` æˆ–å­—ç¬¦ä¸²

### ç›¸å…³ä¾èµ–

- React 18+
- Next.js 15.5.6
- TypeScript

---

## ğŸ“Œ ç¬¬ä¸ƒéƒ¨åˆ†ï¼šé—®é¢˜å½±å“èŒƒå›´ï¼ˆImpact Analysisï¼‰

### å½±å“å“ªäº›æ¨¡å—ï¼Ÿ

1. **å­¦ä¹ æ¨¡å—** (`app/study/QuestionPage.tsx`)
   - é¢˜ç›®å±•ç¤ºåŠŸèƒ½å—å½±å“
   - ç”¨æˆ·æ— æ³•æ­£å¸¸æŸ¥çœ‹é¢˜ç›®å†…å®¹

2. **é¢˜ç›®ç»„ä»¶æ¨¡å—** (`components/QuestionPage.tsx`)
   - âœ… å·²æ­£ç¡®å®ç°ï¼Œä¸å—å½±å“ï¼ˆä½œä¸ºå‚è€ƒç¤ºä¾‹ï¼‰

### æ˜¯å¦å½±å“ç”¨æˆ·ï¼Ÿ

- âœ… **ä¸¥é‡å½±å“å‰ç«¯ç”¨æˆ·**
  - ç”¨æˆ·æ— æ³•æ­£å¸¸ä½¿ç”¨å­¦ä¹ åŠŸèƒ½
  - é¡µé¢æ— æ³•æ­£å¸¸æ¸²æŸ“ï¼Œå¯¼è‡´åŠŸèƒ½å®Œå…¨ä¸å¯ç”¨

### æ˜¯å¦å½±å“ç®¡ç†å‘˜ï¼Ÿ

- âŒ ä¸å½±å“ç®¡ç†å‘˜ï¼ˆåå°ç®¡ç†åŠŸèƒ½æ­£å¸¸ï¼‰

### æ˜¯å¦å½±å“ç”Ÿäº§ç¯å¢ƒï¼Ÿ

- âœ… **å¯èƒ½å½±å“ç”Ÿäº§ç¯å¢ƒ**
  - å¦‚æœç”Ÿäº§ç¯å¢ƒä¸­çš„é¢˜ç›®æ•°æ®æ˜¯å¤šè¯­è¨€å¯¹è±¡æ ¼å¼ï¼Œä¼šå¯¼è‡´é¡µé¢å´©æºƒ
  - å½±å“ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿå¯ç”¨æ€§

### æ˜¯å¦å½±å“ç§¯åˆ†/é¢˜åº“/AIè°ƒç”¨ç­‰æ ¸å¿ƒé€»è¾‘ï¼Ÿ

- âŒ ä¸å½±å“ç§¯åˆ†ç³»ç»Ÿ
- âŒ ä¸å½±å“ AI è°ƒç”¨
- âœ… **å½±å“é¢˜åº“å±•ç¤ºåŠŸèƒ½**
  - ç”¨æˆ·æ— æ³•æŸ¥çœ‹é¢˜ç›®å†…å®¹
  - å½±å“å­¦ä¹ åŠŸèƒ½çš„æ­£å¸¸ä½¿ç”¨

### æ˜¯å¦éœ€ç´§æ€¥ä¿®å¤ï¼Ÿ

- âœ… **éœ€è¦ç´§æ€¥ä¿®å¤**
  - é—®é¢˜å¯¼è‡´æ ¸å¿ƒåŠŸèƒ½å®Œå…¨ä¸å¯ç”¨
  - å½±å“ç”¨æˆ·ä½“éªŒï¼Œéœ€è¦ç«‹å³ä¿®å¤

---

## ğŸ“Œ ç¬¬å…«éƒ¨åˆ†ï¼šCursor è‡ªæˆ‘åˆ†æï¼ˆRoot Cause Hypothesisï¼‰

**æ ¹æœ¬åŸå› **ï¼š

1. **æ•°æ®æ ¼å¼ä¸å…¼å®¹**
   - `src/app/study/QuestionPage.tsx` ç»„ä»¶å‡è®¾ `content`ã€`options` å’Œ `explanation` å§‹ç»ˆæ˜¯å­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²æ•°ç»„
   - ä½†å®é™…ä¸Šï¼Œæ•°æ®åº“ä¸­çš„è¿™äº›å­—æ®µå¯èƒ½æ˜¯å¤šè¯­è¨€å¯¹è±¡æ ¼å¼ï¼ˆJSONBï¼‰
   - å½“æ•°æ®æ˜¯å¤šè¯­è¨€å¯¹è±¡æ—¶ï¼Œç›´æ¥æ¸²æŸ“ä¼šå¯¼è‡´ React æŠ¥é”™

2. **ç¼ºå°‘å·¥å…·å‡½æ•°è°ƒç”¨**
   - è¯¥ç»„ä»¶æ²¡æœ‰ä½¿ç”¨ `getQuestionContent` å’Œ `getQuestionOptions` å·¥å…·å‡½æ•°
   - è€Œ `src/components/QuestionPage.tsx` æ­£ç¡®ä½¿ç”¨äº†è¿™äº›å·¥å…·å‡½æ•°
   - è¯´æ˜ä»£ç åº“ä¸­å·²æœ‰æ­£ç¡®çš„å®ç°æ–¹å¼ï¼Œä½† `src/app/study/QuestionPage.tsx` æ²¡æœ‰é‡‡ç”¨

3. **ç±»å‹å®šä¹‰ä¸å‡†ç¡®**
   - `Question` æ¥å£ä¸­ `content` å®šä¹‰ä¸º `string`ï¼Œä½†å®é™…ä¸Šå¯èƒ½æ˜¯å¤šè¯­è¨€å¯¹è±¡
   - `options` å®šä¹‰ä¸º `string[]`ï¼Œä½†å®é™…ä¸Šå¯èƒ½æ˜¯å¤šè¯­è¨€å¯¹è±¡æ•°ç»„
   - `explanation` å®šä¹‰ä¸º `string`ï¼Œä½†å®é™…ä¸Šå¯èƒ½æ˜¯å¤šè¯­è¨€å¯¹è±¡

4. **ç¼ºå°‘è¯­è¨€æ”¯æŒ**
   - è¯¥ç»„ä»¶æ²¡æœ‰å¯¼å…¥å’Œä½¿ç”¨ `useLanguage` hook
   - æ— æ³•è·å–å½“å‰ç”¨æˆ·é€‰æ‹©çš„è¯­è¨€
   - æ— æ³•æ­£ç¡®æå–å¯¹åº”è¯­è¨€çš„å†…å®¹

---

## ğŸ“Œ ç¬¬ä¹éƒ¨åˆ†ï¼šå»ºè®®ä¿®å¤æ–¹å‘ï¼ˆSuggested Fixesï¼‰

### âœ” æ–¹æ¡ˆ Aï¼ˆæ¨èï¼‰ï¼šä½¿ç”¨å·¥å…·å‡½æ•°å¤„ç†å¤šè¯­è¨€å†…å®¹

**ä¿®å¤æ­¥éª¤**ï¼š

1. **å¯¼å…¥å¿…è¦çš„å·¥å…·å‡½æ•°å’Œ hook**
   ```typescript
   import { useLanguage } from '@/lib/i18n';
   import { getQuestionContent, getQuestionOptions } from '@/lib/questionUtils';
   ```

2. **æ›´æ–° `Question` æ¥å£ç±»å‹å®šä¹‰**
   ```typescript
   interface Question {
     id: number;
     type: 'single' | 'multiple' | 'truefalse';
     content: string | { zh: string; en?: string; ja?: string; [key: string]: string | undefined };
     image?: string;
     options?: string[] | Array<{ zh: string; en?: string; ja?: string; [key: string]: string | undefined }>;
     correctAnswer: string | string[];
     explanation?: string | { zh: string; en?: string; ja?: string; [key: string]: string | undefined };
   }
   ```

3. **åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ `useLanguage` hook**
   ```typescript
   const { language } = useLanguage();
   ```

4. **ä¿®å¤å†…å®¹æ¸²æŸ“**
   ```typescript
   <p className="text-gray-900 text-lg mb-4">
     {getQuestionContent(currentQuestion.content, language) || ''}
   </p>
   ```

5. **ä¿®å¤é€‰é¡¹æ¸²æŸ“**
   ```typescript
   {getQuestionOptions(currentQuestion.options, language).map((option, index) => {
     // ... æ¸²æŸ“é€»è¾‘
   })}
   ```

6. **ä¿®å¤è§£ææ¸²æŸ“**
   ```typescript
   {currentQuestion.explanation && (
     <p className="text-gray-700">
       {getQuestionContent(currentQuestion.explanation as any, language) || ''}
     </p>
   )}
   ```

**ä¿®æ”¹ä½ç½®**ï¼š
- `src/app/study/QuestionPage.tsx`
  - ç¬¬ 1-7 è¡Œï¼šæ·»åŠ å¯¼å…¥è¯­å¥
  - ç¬¬ 9-17 è¡Œï¼šæ›´æ–° `Question` æ¥å£ç±»å‹å®šä¹‰
  - ç¬¬ 28-29 è¡Œï¼šæ·»åŠ  `useLanguage` hook
  - ç¬¬ 291 è¡Œï¼šä¿®å¤å†…å®¹æ¸²æŸ“
  - ç¬¬ 319 è¡Œï¼šä¿®å¤é€‰é¡¹æ¸²æŸ“
  - ç¬¬ 383 è¡Œï¼šä¿®å¤è§£ææ¸²æŸ“

**ä¼˜ç‚¹**ï¼š
- ä¸ `src/components/QuestionPage.tsx` ä¿æŒä¸€è‡´
- æ”¯æŒå¤šè¯­è¨€åˆ‡æ¢
- å…¼å®¹æ—§æ ¼å¼ï¼ˆå­—ç¬¦ä¸²ï¼‰å’Œæ–°æ ¼å¼ï¼ˆå¤šè¯­è¨€å¯¹è±¡ï¼‰
- ä»£ç ç®€æ´ï¼Œæ˜“äºç»´æŠ¤

**ç¼ºç‚¹**ï¼š
- éœ€è¦æ·»åŠ ä¾èµ–å¯¼å…¥

### âœ” æ–¹æ¡ˆ Bï¼šæ·»åŠ ç±»å‹æ£€æŸ¥å’Œè½¬æ¢

**ä¿®å¤æ­¥éª¤**ï¼š

1. åœ¨æ¸²æŸ“å‰æ£€æŸ¥æ•°æ®ç±»å‹
2. å¦‚æœæ˜¯å¯¹è±¡ï¼Œæå–å¯¹åº”è¯­è¨€çš„å†…å®¹
3. å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œç›´æ¥ä½¿ç”¨

**ä¼˜ç‚¹**ï¼š
- ä¸éœ€è¦å¯¼å…¥é¢å¤–ä¾èµ–

**ç¼ºç‚¹**ï¼š
- ä»£ç é‡å¤ï¼Œé€»è¾‘åˆ†æ•£
- ä¸å¦‚æ–¹æ¡ˆ A ç»Ÿä¸€å’Œæ˜“ç»´æŠ¤

---

## ğŸ“Œ ç¬¬åéƒ¨åˆ†ï¼šéœ€è¦ä½ ï¼ˆChatGPTï¼‰å†³ç­–çš„ç‚¹ï¼ˆDecision Neededï¼‰

### éœ€è¦æœ€ç»ˆç¡®è®¤çš„ç‚¹

1. **ä¿®å¤æ–¹æ¡ˆé€‰æ‹©**
   - æ˜¯å¦ä½¿ç”¨æ–¹æ¡ˆ Aï¼ˆä½¿ç”¨å·¥å…·å‡½æ•°å¤„ç†å¤šè¯­è¨€å†…å®¹ï¼‰ï¼Ÿ
   - è¿˜æ˜¯ä½¿ç”¨æ–¹æ¡ˆ Bï¼ˆæ·»åŠ ç±»å‹æ£€æŸ¥å’Œè½¬æ¢ï¼‰ï¼Ÿ

2. **ç±»å‹å®šä¹‰æ›´æ–°**
   - æ˜¯å¦æ›´æ–° `Question` æ¥å£ä»¥æ”¯æŒå¤šè¯­è¨€å¯¹è±¡æ ¼å¼ï¼Ÿ
   - è¿˜æ˜¯ä¿æŒç°æœ‰ç±»å‹å®šä¹‰ï¼Œä½¿ç”¨ç±»å‹æ–­è¨€ï¼Ÿ

3. **è¯­è¨€æ”¯æŒ**
   - æ˜¯å¦æ·»åŠ å¤šè¯­è¨€æ”¯æŒï¼ˆä½¿ç”¨ `useLanguage` hookï¼‰ï¼Ÿ
   - è¿˜æ˜¯å›ºå®šä½¿ç”¨ä¸­æ–‡ï¼Ÿ

### éœ€è¦é€‰æ‹©æ–¹æ¡ˆçš„ç‚¹

1. **å·¥å…·å‡½æ•°ä½¿ç”¨**
   - ä½¿ç”¨ `getQuestionContent` å’Œ `getQuestionOptions`ï¼ˆæ¨èï¼‰
   - è¿˜æ˜¯è‡ªå·±å®ç°ç±»å‹æ£€æŸ¥å’Œè½¬æ¢é€»è¾‘ï¼Ÿ

2. **è¯­è¨€å¤„ç†**
   - æ”¯æŒå¤šè¯­è¨€åˆ‡æ¢ï¼ˆæ¨èï¼‰
   - è¿˜æ˜¯å›ºå®šä½¿ç”¨ä¸­æ–‡ï¼Ÿ

### éœ€è¦é¢å¤–ä¿¡æ¯

1. **æ•°æ®æ ¼å¼ç¡®è®¤**
   - ç”Ÿäº§ç¯å¢ƒä¸­çš„é¢˜ç›®æ•°æ®æ˜¯å¦éƒ½æ˜¯å¤šè¯­è¨€å¯¹è±¡æ ¼å¼ï¼Ÿ
   - è¿˜æ˜¯æ··åˆæ ¼å¼ï¼ˆéƒ¨åˆ†å­—ç¬¦ä¸²ï¼Œéƒ¨åˆ†å¯¹è±¡ï¼‰ï¼Ÿ

2. **ç”¨æˆ·è¯­è¨€éœ€æ±‚**
   - ç”¨æˆ·æ˜¯å¦éœ€è¦å¤šè¯­è¨€åˆ‡æ¢åŠŸèƒ½ï¼Ÿ
   - è¿˜æ˜¯åªéœ€è¦ä¸­æ–‡ï¼Ÿ

---

## ğŸ“Œ ç¬¬åä¸€éƒ¨åˆ†ï¼šé™„å½•ï¼ˆAttachmentsï¼‰

### ç›¸å…³ä»£ç æ–‡ä»¶

1. `src/app/study/QuestionPage.tsx`ï¼ˆé—®é¢˜æ–‡ä»¶ï¼‰
2. `src/components/QuestionPage.tsx`ï¼ˆæ­£ç¡®å®ç°å‚è€ƒï¼‰
3. `src/lib/questionUtils.ts`ï¼ˆå·¥å…·å‡½æ•°ï¼‰

### æ•°æ®åº“è¡¨ç»“æ„

- `questions` è¡¨ï¼š
  - `content` JSONBï¼šå¤šè¯­è¨€é¢˜ç›®å†…å®¹æˆ–å­—ç¬¦ä¸²
  - `options` JSONBï¼šå¤šè¯­è¨€é€‰é¡¹æ•°ç»„æˆ–å­—ç¬¦ä¸²æ•°ç»„
  - `explanation` JSONBï¼šå¤šè¯­è¨€è§£æè¯´æ˜æˆ–å­—ç¬¦ä¸²

### ç›¸å…³æ–‡æ¡£

- `docs/ç ”å‘è§„èŒƒ/æ–‡ä»¶ç»“æ„.md`
- `docs/ç ”å‘è§„èŒƒ/æ•°æ®åº“ç»“æ„_DRIVEQUIZ.md`

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-02-20  
**æŠ¥å‘Šç”Ÿæˆå·¥å…·**: Cursor AI Assistant

