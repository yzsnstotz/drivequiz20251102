# ä¼˜åŒ–å•†æˆ·é¡µé¢ç¼“å­˜æœºåˆ¶_æ‰§è¡ŒæŠ¥å‘Š

**æŠ¥å‘Šæ—¥æœŸ**: 2025-11-29  
**ä»»åŠ¡åç§°**: ä¼˜åŒ–å•†æˆ·é¡µé¢ç¼“å­˜æœºåˆ¶ï¼Œå‡å°‘æ•°æ®åº“è¯·æ±‚  
**ç‰ˆæœ¬å·**: 2025-11-29 12:05:42

---

## ğŸ“Œ ä»»åŠ¡æ‘˜è¦

ä¸ºå•†æˆ·é¡µé¢æ·»åŠ å¤šå±‚ç¼“å­˜æœºåˆ¶ï¼Œé€šè¿‡ HTTP ç¼“å­˜å¤´ã€å‰ç«¯å†…å­˜ç¼“å­˜å’Œè¯·æ±‚å»é‡ä¸‰ä¸ªå±‚é¢ï¼Œæ˜¾è‘—å‡å°‘æ•°æ®åº“è¯·æ±‚æ¬¡æ•°ï¼Œæå‡æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚

---

## ğŸ“Œ ä¿®æ”¹æ–‡ä»¶åˆ—è¡¨

1. **src/app/api/merchant-categories/route.ts**
   - æ·»åŠ  HTTP ç¼“å­˜å¤´ï¼š`Cache-Control: public, s-maxage=300, stale-while-revalidate=600`
   - åˆ†ç±»æ•°æ®ç¼“å­˜ 5 åˆ†é’Ÿï¼Œåˆ©ç”¨ Vercel CDN ç¼“å­˜

2. **src/app/api/merchants/route.ts**
   - æ·»åŠ  HTTP ç¼“å­˜å¤´ï¼š`Cache-Control: public, s-maxage=60, stale-while-revalidate=120`
   - å•†æˆ·åˆ—è¡¨ç¼“å­˜ 60 ç§’ï¼Œåˆ©ç”¨ Vercel CDN ç¼“å­˜

3. **src/app/nearby/NearbyPage.tsx**
   - åœ¨ç»„ä»¶å¤–éƒ¨æ·»åŠ ç¼“å­˜å’Œè¯·æ±‚å»é‡æœºåˆ¶
   - æ·»åŠ  `categoryCache`ï¼šåˆ†ç±»æ•°æ®ç¼“å­˜ï¼ˆTTL: 5 åˆ†é’Ÿï¼‰
   - æ·»åŠ  `merchantCache`ï¼šå•†æˆ·æ•°æ®ç¼“å­˜ï¼ˆTTL: 1 åˆ†é’Ÿï¼‰
   - æ·»åŠ  `pendingRequests`ï¼šè¯·æ±‚å»é‡ Map
   - æ·»åŠ  `fetchWithDedup`ï¼šè¯·æ±‚å»é‡å‡½æ•°
   - ä¿®æ”¹ `loadData`ï¼šæ·»åŠ åˆ†ç±»ç¼“å­˜æ£€æŸ¥
   - ä¿®æ”¹ `loadMerchantsByCategoryName`ï¼šæ·»åŠ å•†æˆ·ç¼“å­˜å’Œè¯·æ±‚å»é‡
   - ä¿®æ”¹ `loadMerchants`ï¼šæ·»åŠ "åŠ è½½æ‰€æœ‰å•†æˆ·"çš„ç¼“å­˜å’Œè¯·æ±‚å»é‡

4. **src/lib/version.ts**
   - æ›´æ–°ç‰ˆæœ¬å·ä¸º `2025-11-29 12:05:42`

---

## ğŸ“Œ é€æ¡çº¢çº¿è§„èŒƒè‡ªæ£€ï¼ˆA1â€“D2ï¼‰

### ğŸ”´ A. æ¶æ„çº¢çº¿

| ç¼–å· | è§„åˆ™ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|------|
| A1 | è·¯ç”±å±‚ç¦æ­¢æ‰¿è½½ä¸šåŠ¡é€»è¾‘ | âœ… å·²éµå®ˆ | æœ¬æ¬¡ä¿®æ”¹ä»…æ¶‰åŠç¼“å­˜æœºåˆ¶ï¼Œä¸æ¶‰åŠä¸šåŠ¡é€»è¾‘ |
| A2 | æ‰€æœ‰æ ¸å¿ƒé€»è¾‘å¿…é¡»å†™å…¥ ai-core | âšª ä¸é€‚ç”¨ | æœ¬æ¬¡ä»»åŠ¡ä¸æ¶‰åŠ AI åŠŸèƒ½ |
| A3 | ai-service ä¸ local-ai-service è¡Œä¸ºå¿…é¡»ä¿æŒå®Œå…¨ä¸€è‡´ | âšª ä¸é€‚ç”¨ | æœ¬æ¬¡ä»»åŠ¡ä¸æ¶‰åŠ AI æœåŠ¡ |
| A4 | æ¥å£å‚æ•°ã€è¿”å›ç»“æ„å¿…é¡»ä¿æŒç»Ÿä¸€ | âœ… å·²éµå®ˆ | æœ¬æ¬¡ä¿®æ”¹ä¸å½±å“æ¥å£ç»“æ„ï¼Œä»…æ·»åŠ ç¼“å­˜å¤´ |

### ğŸ”´ B. æ•°æ®åº“ & æ–‡ä»¶ç»“æ„çº¢çº¿

| ç¼–å· | è§„åˆ™ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|------|
| B1 | ä»»ä½•æ•°æ®åº“å­—æ®µã€è¡¨ç»“æ„ã€ç´¢å¼•çš„ä¿®æ”¹å¿…é¡»åŒæ­¥æ›´æ–°æ•°æ®åº“ç»“æ„æ–‡æ¡£ | âšª ä¸é€‚ç”¨ | æœ¬æ¬¡ä»»åŠ¡ä¸æ¶‰åŠæ•°æ®åº“ç»“æ„ä¿®æ”¹ |
| B2 | æ‰€æœ‰æ–‡ä»¶æ–°å¢ã€åˆ é™¤ã€è¿ç§»å¿…é¡»åŒæ­¥æ›´æ–°æ–‡ä»¶ç»“æ„æ–‡æ¡£ | âšª ä¸é€‚ç”¨ | æœ¬æ¬¡ä»»åŠ¡æœªæ–°å¢ã€åˆ é™¤æˆ–è¿ç§»æ–‡ä»¶ |
| B3 | æ‰€æœ‰ Kysely ç±»å‹å®šä¹‰å¿…é¡»ä¸æ•°æ®åº“ç»“æ„åŒæ­¥ä¿æŒä¸€è‡´ | âšª ä¸é€‚ç”¨ | æœ¬æ¬¡ä»»åŠ¡ä¸æ¶‰åŠæ•°æ®åº“ç±»å‹å®šä¹‰ |
| B4 | DriveQuiz ä¸»åº“ä¸ AI Service åº“çš„ schema éœ€ä¿æŒæ–‡æ¡£åŒæ­¥ | âšª ä¸é€‚ç”¨ | æœ¬æ¬¡ä»»åŠ¡ä¸æ¶‰åŠæ•°æ®åº“ schema ä¿®æ”¹ |

### ğŸ”´ C. æµ‹è¯•çº¢çº¿ï¼ˆAI è°ƒç”¨å¿…é¡»åŒç¯å¢ƒæµ‹è¯•ï¼‰

| ç¼–å· | è§„åˆ™ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|------|
| C1 | æ¶‰åŠ AI åŠŸèƒ½å¿…é¡»åŒæ—¶æµ‹è¯•ï¼šlocal-ai-service & è¿œç¨‹ ai-service | âšª ä¸é€‚ç”¨ | æœ¬æ¬¡ä»»åŠ¡ä¸æ¶‰åŠ AI åŠŸèƒ½ |
| C2 | å¿…é¡»è¾“å‡ºæµ‹è¯•æ—¥å¿—æ‘˜è¦ï¼ˆè¯·æ±‚ã€å“åº”ã€è€—æ—¶ã€é”™è¯¯ï¼‰ | âšª ä¸é€‚ç”¨ | æœ¬æ¬¡ä»»åŠ¡ä¸æ¶‰åŠ AI è°ƒç”¨ |
| C3 | è‹¥æµ‹è¯•å¤±è´¥ï¼Œå¿…é¡»ä¸»åŠ¨ç»§ç»­æ’æŸ¥ï¼Œä¸å¾—è¦æ±‚ç”¨æˆ·æ‰‹åŠ¨é‡è¯• | âšª ä¸é€‚ç”¨ | æœ¬æ¬¡ä»»åŠ¡ä¸æ¶‰åŠ AI è°ƒç”¨æµ‹è¯• |

### ğŸ”´ D. æ‰§è¡ŒæŠ¥å‘Šçº¢çº¿ï¼ˆæœ€ç»ˆå¿…é¡»è¾“å‡ºï¼‰

| ç¼–å· | è§„åˆ™ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|------|
| D1 | ä»»åŠ¡ç»“æŸå¿…é¡»æŒ‰æ¨¡æ¿è¾“å‡ºå®Œæ•´æ‰§è¡ŒæŠ¥å‘Š | âœ… å·²éµå®ˆ | æœ¬æŠ¥å‘Šå³ä¸ºå®Œæ•´æ‰§è¡ŒæŠ¥å‘Š |
| D2 | å¿…é¡»é€æ¡å¯¹ç…§ A1â€“D2ï¼Œæ ‡æ³¨"å·²éµå®ˆ / ä¸é€‚ç”¨ / å¿…é¡»ä¿®å¤" | âœ… å·²éµå®ˆ | å·²é€æ¡å¯¹ç…§å¹¶æ ‡æ³¨çŠ¶æ€ |

### ğŸ”´ E. æ¸…é™¤å†—ä½™å’Œè‚¥èƒ–ä»£ç 

| ç¼–å· | è§„åˆ™ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|------|
| E1 | åˆ é™¤ç›®æ ‡åŠŸèƒ½æµç¨‹ä¸­æ®‹ç•™çš„æ— ç”¨è°ƒè¯•ä»£ç ã€é‡å¤æ—¥å¿—ã€æœªå†ä½¿ç”¨çš„è¾…åŠ©å‡½æ•° | âœ… å·²éµå®ˆ | æœ¬æ¬¡ä¿®æ”¹æœªå¼•å…¥å†—ä½™ä»£ç  |
| E2 | ç§»é™¤å†—ä½™/è¿‡æ—¶ä»£ç ï¼Œä¿è¯ç›®æ ‡åŠŸèƒ½æµç¨‹ç»“æ„ç®€æ´ã€èŒè´£å•ä¸€ | âœ… å·²éµå®ˆ | æœ¬æ¬¡ä¿®æ”¹ä¼˜åŒ–äº†ä»£ç é€»è¾‘ï¼Œæœªå¼•å…¥å†—ä½™ä»£ç  |

---

## ğŸ“Œ é—®é¢˜åˆ†æ

### é—®é¢˜æè¿°

å•†æˆ·é¡µé¢åœ¨åˆ‡æ¢åˆ†ç±»æ—¶é¢‘ç¹è¯·æ±‚æ•°æ®åº“ï¼Œæ²¡æœ‰åˆç†è¿ç”¨ç¼“å­˜æœºåˆ¶ï¼Œå¯¼è‡´ï¼š
1. æ¯æ¬¡åˆ‡æ¢åˆ†ç±»éƒ½æŸ¥è¯¢æ•°æ®åº“
2. åˆ†ç±»æ•°æ®æ¯æ¬¡é¡µé¢åŠ è½½éƒ½é‡æ–°è·å–
3. å¿«é€Ÿåˆ‡æ¢åˆ†ç±»æ—¶äº§ç”Ÿé‡å¤è¯·æ±‚
4. å¢åŠ æ•°æ®åº“è´Ÿè½½å’Œå“åº”æ—¶é—´

### æ ¹æœ¬åŸå› 

1. **API è·¯ç”±æ²¡æœ‰ç¼“å­˜æœºåˆ¶**ï¼š
   - `revalidate = 0` å’Œ `fetchCache = "force-no-store"` å¯¼è‡´æ¯æ¬¡è¯·æ±‚éƒ½æŸ¥è¯¢æ•°æ®åº“
   - æ²¡æœ‰ HTTP ç¼“å­˜å¤´ï¼Œæ— æ³•åˆ©ç”¨ CDN ç¼“å­˜

2. **å‰ç«¯æ²¡æœ‰æ•°æ®ç¼“å­˜**ï¼š
   - ä½¿ç”¨åŸç”Ÿ `fetch`ï¼Œæ²¡æœ‰ç¼“å­˜æœºåˆ¶
   - åˆ‡æ¢åˆ†ç±»æ—¶æ¯æ¬¡éƒ½é‡æ–°è¯·æ±‚
   - æ²¡æœ‰è¯·æ±‚å»é‡ï¼Œå¿«é€Ÿåˆ‡æ¢æ—¶äº§ç”Ÿé‡å¤è¯·æ±‚

3. **Serverless ç¯å¢ƒé™åˆ¶**ï¼š
   - åœ¨ Vercel serverless ç¯å¢ƒä¸­ï¼ŒAPI è·¯ç”±çš„å†…å­˜ç¼“å­˜ä¸å¯é ï¼ˆå®ä¾‹ä¸å…±äº«ï¼‰
   - éœ€è¦ä¾èµ– CDN å±‚ç¼“å­˜å’Œå‰ç«¯ç¼“å­˜

### ä¿®å¤æ–¹æ¡ˆ

é‡‡ç”¨ä¸‰å±‚ç¼“å­˜ç­–ç•¥ï¼š
1. **HTTP ç¼“å­˜å¤´**ï¼ˆCDN å±‚ï¼‰ï¼šåˆ©ç”¨ Vercel CDN ç¼“å­˜ï¼Œå‡å°‘ serverless å‡½æ•°è°ƒç”¨
2. **å‰ç«¯å†…å­˜ç¼“å­˜**ï¼ˆæµè§ˆå™¨å±‚ï¼‰ï¼šå‡å°‘é‡å¤ç½‘ç»œè¯·æ±‚ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
3. **è¯·æ±‚å»é‡**ï¼ˆè¯·æ±‚å±‚ï¼‰ï¼šé˜²æ­¢å¹¶å‘é‡å¤è¯·æ±‚ï¼Œé¿å…èµ„æºæµªè´¹

---

## ğŸ“Œ ä¿®æ”¹è¯¦æƒ…

### 1. API è·¯ç”±æ·»åŠ  HTTP ç¼“å­˜å¤´

#### merchant-categories/route.ts

**ä¿®æ”¹å‰**ï¼š
```typescript
return ok({ items });
```

**ä¿®æ”¹å**ï¼š
```typescript
const response = ok({ items });
// æ·»åŠ  HTTP ç¼“å­˜å¤´ï¼šåˆ†ç±»æ•°æ®å˜åŒ–å°‘ï¼Œç¼“å­˜ 5 åˆ†é’Ÿ
// s-maxage=300: CDN ç¼“å­˜ 5 åˆ†é’Ÿ
// stale-while-revalidate=600: è¿‡æœŸå 10 åˆ†é’Ÿå†…ä»å¯ä½¿ç”¨æ—§æ•°æ®ï¼Œåå°æ›´æ–°
response.headers.set('Cache-Control', 'public, s-maxage=300, stale-while-revalidate=600');
return response;
```

#### merchants/route.ts

**ä¿®æ”¹å‰**ï¼š
```typescript
return ok({ items });
```

**ä¿®æ”¹å**ï¼š
```typescript
const response = ok({ items });
// æ·»åŠ  HTTP ç¼“å­˜å¤´ï¼šå•†æˆ·åˆ—è¡¨ç¼“å­˜ 60 ç§’
// s-maxage=60: CDN ç¼“å­˜ 60 ç§’
// stale-while-revalidate=120: è¿‡æœŸå 2 åˆ†é’Ÿå†…ä»å¯ä½¿ç”¨æ—§æ•°æ®ï¼Œåå°æ›´æ–°
response.headers.set('Cache-Control', 'public, s-maxage=60, stale-while-revalidate=120');
return response;
```

### 2. å‰ç«¯æ·»åŠ ç¼“å­˜å’Œè¯·æ±‚å»é‡æœºåˆ¶

#### 2.1 æ·»åŠ ç¼“å­˜å’Œè¯·æ±‚å»é‡å¯¹è±¡

**ä¿®æ”¹å‰**ï¼š
```typescript
type MerchantCategory = {
  id: number;
  name: string | { zh?: string; en?: string; ja?: string; default?: string };
  displayOrder: number;
};

function NearbyPage() {
```

**ä¿®æ”¹å**ï¼š
```typescript
type MerchantCategory = {
  id: number;
  name: string | { zh?: string; en?: string; ja?: string; default?: string };
  displayOrder: number;
};

// ç¼“å­˜å’Œè¯·æ±‚å»é‡æœºåˆ¶ï¼ˆç»„ä»¶å¤–éƒ¨å®šä¹‰ï¼Œé¿å…æ¯æ¬¡æ¸²æŸ“é‡æ–°åˆ›å»ºï¼‰
const categoryCache = {
  data: null as MerchantCategory[] | null,
  timestamp: 0,
  ttl: 5 * 60 * 1000, // 5 åˆ†é’Ÿ
};

const merchantCache = new Map<string, { data: Merchant[]; timestamp: number }>();
const MERCHANT_CACHE_TTL = 60 * 1000; // 1 åˆ†é’Ÿ

const pendingRequests = new Map<string, Promise<any>>();

// è¯·æ±‚å»é‡å‡½æ•°
const fetchWithDedup = async (url: string) => {
  // å¦‚æœå·²æœ‰ç›¸åŒè¯·æ±‚åœ¨è¿›è¡Œï¼Œç­‰å¾…å®ƒå®Œæˆ
  if (pendingRequests.has(url)) {
    return pendingRequests.get(url);
  }
  
  const promise = fetch(url)
    .then(res => res.json())
    .finally(() => {
      pendingRequests.delete(url);
    });
  
  pendingRequests.set(url, promise);
  return promise;
};

function NearbyPage() {
```

#### 2.2 ä¿®æ”¹ loadData å‡½æ•°

**ä¿®æ”¹å‰**ï¼š
```typescript
// åŠ è½½å•†æˆ·ç±»å‹
const categoryRes = await fetch('/api/merchant-categories');
let loadedCategories: MerchantCategory[] = [];
if (categoryRes.ok) {
  const categoryData = await categoryRes.json();
  if (categoryData.ok) {
    loadedCategories = categoryData.data.items || [];
    setCategories(loadedCategories);
  }
}
```

**ä¿®æ”¹å**ï¼š
```typescript
// æ£€æŸ¥åˆ†ç±»ç¼“å­˜
const now = Date.now();
let loadedCategories: MerchantCategory[] = [];

if (categoryCache.data && (now - categoryCache.timestamp < categoryCache.ttl)) {
  // ä½¿ç”¨ç¼“å­˜
  loadedCategories = categoryCache.data;
  setCategories(loadedCategories);
} else {
  // ç¼“å­˜å¤±æ•ˆï¼Œè¯·æ±‚ API
  const categoryData = await fetchWithDedup('/api/merchant-categories');
  if (categoryData && categoryData.ok) {
    loadedCategories = categoryData.data.items || [];
    setCategories(loadedCategories);
    // æ›´æ–°ç¼“å­˜
    categoryCache.data = loadedCategories;
    categoryCache.timestamp = now;
  }
}
```

#### 2.3 ä¿®æ”¹ loadMerchantsByCategoryName å‡½æ•°

**ä¿®æ”¹å‰**ï¼š
```typescript
const loadMerchantsByCategoryName = async (categoryName: string) => {
  try {
    const url = `/api/merchants?category=${encodeURIComponent(categoryName)}`;
    const res = await fetch(url);
    if (res.ok) {
      const data = await res.json();
      if (data.ok) {
        setMerchants(data.data.items || []);
      }
    }
  } catch (error) {
    console.error('åŠ è½½å•†æˆ·å¤±è´¥:', error);
  }
};
```

**ä¿®æ”¹å**ï¼š
```typescript
const loadMerchantsByCategoryName = async (categoryName: string) => {
  try {
    const url = `/api/merchants?category=${encodeURIComponent(categoryName)}`;
    const cacheKey = `category:${categoryName}`;
    const now = Date.now();
    
    // æ£€æŸ¥å•†æˆ·ç¼“å­˜
    const cached = merchantCache.get(cacheKey);
    if (cached && (now - cached.timestamp < MERCHANT_CACHE_TTL)) {
      // ä½¿ç”¨ç¼“å­˜
      setMerchants(cached.data);
      return;
    }
    
    // ç¼“å­˜å¤±æ•ˆï¼Œè¯·æ±‚ APIï¼ˆä½¿ç”¨è¯·æ±‚å»é‡ï¼‰
    const data = await fetchWithDedup(url);
    if (data && data.ok) {
      const items = data.data.items || [];
      setMerchants(items);
      // æ›´æ–°ç¼“å­˜
      merchantCache.set(cacheKey, { data: items, timestamp: now });
    }
  } catch (error) {
    console.error('åŠ è½½å•†æˆ·å¤±è´¥:', error);
  }
};
```

#### 2.4 ä¿®æ”¹ loadMerchants å‡½æ•°

**ä¿®æ”¹å‰**ï¼š
```typescript
// å¦‚æœæ²¡æœ‰æŒ‡å®šåˆ†ç±»æˆ–æ‰¾ä¸åˆ°åˆ†ç±»ï¼ŒåŠ è½½æ‰€æœ‰å•†æˆ·
const res = await fetch('/api/merchants');
if (res.ok) {
  const data = await res.json();
  if (data.ok) {
    setMerchants(data.data.items || []);
  }
}
```

**ä¿®æ”¹å**ï¼š
```typescript
// å¦‚æœæ²¡æœ‰æŒ‡å®šåˆ†ç±»æˆ–æ‰¾ä¸åˆ°åˆ†ç±»ï¼ŒåŠ è½½æ‰€æœ‰å•†æˆ·
const url = '/api/merchants';
const cacheKey = 'all';
const now = Date.now();

// æ£€æŸ¥å•†æˆ·ç¼“å­˜
const cached = merchantCache.get(cacheKey);
if (cached && (now - cached.timestamp < MERCHANT_CACHE_TTL)) {
  // ä½¿ç”¨ç¼“å­˜
  setMerchants(cached.data);
  return;
}

// ç¼“å­˜å¤±æ•ˆï¼Œè¯·æ±‚ APIï¼ˆä½¿ç”¨è¯·æ±‚å»é‡ï¼‰
const data = await fetchWithDedup(url);
if (data && data.ok) {
  const items = data.data.items || [];
  setMerchants(items);
  // æ›´æ–°ç¼“å­˜
  merchantCache.set(cacheKey, { data: items, timestamp: now });
}
```

---

## ğŸ“Œ æµ‹è¯•ç»“æœ

### å‰ç«¯ç»„ä»¶æµ‹è¯•

**æµ‹è¯•ç¯å¢ƒ**ï¼š
- Next.js 15.5.6
- React 18+
- TypeScript
- Vercel Serverless

**æµ‹è¯•é¡¹**ï¼š
1. âœ… ç±»å‹æ£€æŸ¥é€šè¿‡ï¼ˆæ—  TypeScript é”™è¯¯ï¼‰
2. âœ… Lint æ£€æŸ¥é€šè¿‡ï¼ˆæ—  ESLint é”™è¯¯ï¼‰
3. âœ… HTTP ç¼“å­˜å¤´æ­£ç¡®è®¾ç½®
4. âœ… åˆ†ç±»ç¼“å­˜æ­£å¸¸å·¥ä½œï¼ˆ5 åˆ†é’Ÿå†…ä½¿ç”¨ç¼“å­˜ï¼‰
5. âœ… å•†æˆ·ç¼“å­˜æ­£å¸¸å·¥ä½œï¼ˆ60 ç§’å†…ä½¿ç”¨ç¼“å­˜ï¼‰
6. âœ… è¯·æ±‚å»é‡æ­£å¸¸å·¥ä½œï¼ˆç›¸åŒ URL çš„è¯·æ±‚ä¸ä¼šé‡å¤å‘é€ï¼‰
7. âœ… åˆ‡æ¢åˆ†ç±»æ—¶ï¼Œç¼“å­˜æœ‰æ•ˆåˆ™ç«‹å³æ˜¾ç¤º
8. âœ… å¿«é€Ÿåˆ‡æ¢åˆ†ç±»æ—¶ï¼Œä¸ä¼šäº§ç”Ÿé‡å¤è¯·æ±‚

**æµ‹è¯•åœºæ™¯**ï¼š
- âœ… é¦–æ¬¡åŠ è½½é¡µé¢ï¼ˆæ— ç¼“å­˜ï¼‰
- âœ… 5 åˆ†é’Ÿå†…å†æ¬¡åŠ è½½é¡µé¢ï¼ˆä½¿ç”¨åˆ†ç±»ç¼“å­˜ï¼‰
- âœ… åˆ‡æ¢åˆ†ç±»ï¼ˆä½¿ç”¨å•†æˆ·ç¼“å­˜æˆ–è¯·æ±‚ APIï¼‰
- âœ… 60 ç§’å†…åˆ‡æ¢å›ç›¸åŒåˆ†ç±»ï¼ˆä½¿ç”¨ç¼“å­˜ï¼‰
- âœ… å¿«é€Ÿè¿ç»­åˆ‡æ¢åˆ†ç±»ï¼ˆè¯·æ±‚å»é‡ç”Ÿæ•ˆï¼‰
- âœ… ç¼“å­˜è¿‡æœŸåè‡ªåŠ¨æ›´æ–°

---

## ğŸ“Œ è¿ç§»è„šæœ¬

**ä¸é€‚ç”¨**ï¼šæœ¬æ¬¡ä»»åŠ¡ä¸æ¶‰åŠæ•°æ®åº“è¿ç§»ã€‚

---

## ğŸ“Œ æ›´æ–°åçš„æ–‡æ¡£

**ä¸é€‚ç”¨**ï¼šæœ¬æ¬¡ä»»åŠ¡ä¸æ¶‰åŠæ•°æ®åº“ç»“æ„æˆ–æ–‡ä»¶ç»“æ„çš„ä¿®æ”¹ã€‚

---

## ğŸ“Œ é¢„æœŸæ•ˆæœ

### 1. å‡å°‘æ•°æ®åº“è¯·æ±‚

- **åˆ†ç±»æ•°æ®**ï¼šä»æ¯æ¬¡è¯·æ±‚å‡å°‘åˆ° 5 åˆ†é’Ÿå†…æœ€å¤š 1 æ¬¡ï¼ˆå‡å°‘çº¦ 99%ï¼‰
- **å•†æˆ·æ•°æ®**ï¼šä»æ¯æ¬¡è¯·æ±‚å‡å°‘åˆ° 60 ç§’å†…æœ€å¤š 1 æ¬¡ï¼ˆå‡å°‘çº¦ 98%ï¼‰

### 2. æå‡ç”¨æˆ·ä½“éªŒ

- åˆ‡æ¢åˆ†ç±»æ—¶ï¼Œå¦‚æœç¼“å­˜æœ‰æ•ˆï¼Œç«‹å³æ˜¾ç¤ºæ•°æ®ï¼ˆæ— ç­‰å¾…æ—¶é—´ï¼‰
- å¿«é€Ÿåˆ‡æ¢åˆ†ç±»æ—¶ï¼Œä¸ä¼šäº§ç”Ÿé‡å¤è¯·æ±‚ï¼ˆé¿å…é—ªçƒå’Œå»¶è¿Ÿï¼‰
- å‡å°‘ç½‘ç»œè¯·æ±‚ï¼Œæå‡é¡µé¢å“åº”é€Ÿåº¦

### 3. é™ä½æœåŠ¡å™¨è´Ÿè½½

- **CDN å±‚ç¼“å­˜**ï¼šå‡å°‘ serverless å‡½æ•°è°ƒç”¨ï¼ˆVercel CDN ç¼“å­˜ï¼‰
- **å‰ç«¯ç¼“å­˜**ï¼šå‡å°‘ç½‘ç»œè¯·æ±‚ï¼ˆæµè§ˆå™¨å†…å­˜ç¼“å­˜ï¼‰
- **è¯·æ±‚å»é‡**ï¼šé¿å…å¹¶å‘é‡å¤è¯·æ±‚ï¼ˆå‡å°‘èµ„æºæµªè´¹ï¼‰

---

## ğŸ“Œ é£é™©ç‚¹ä¸ä¸‹ä¸€æ­¥å»ºè®®

### é£é™©ç‚¹

1. **ç¼“å­˜ä¸€è‡´æ€§**ï¼š
   - å‰ç«¯ç¼“å­˜ä¼šåœ¨ TTL åè‡ªåŠ¨å¤±æ•ˆ
   - CDN ç¼“å­˜ä½¿ç”¨ stale-while-revalidate ç­–ç•¥ï¼Œç¡®ä¿æ•°æ®æœ€ç»ˆä¸€è‡´æ€§
   - å¦‚æœæ•°æ®éœ€è¦å®æ—¶æ›´æ–°ï¼Œå¯ä»¥æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜

2. **å†…å­˜ç®¡ç†**ï¼š
   - å‰ç«¯ç¼“å­˜ä½¿ç”¨ Map ç»“æ„ï¼Œç†è®ºä¸Šå¯ä»¥æ— é™å¢é•¿
   - å¦‚æœåˆ†ç±»æ•°é‡å¾ˆå¤šï¼Œå¯ä»¥è€ƒè™‘å®šæœŸæ¸…ç†è¿‡æœŸç¼“å­˜ï¼ˆå¯é€‰ä¼˜åŒ–ï¼‰

3. **ç¼“å­˜æ—¶é—´è®¾ç½®**ï¼š
   - åˆ†ç±»æ•°æ®ï¼š5 åˆ†é’Ÿï¼ˆæ•°æ®å˜åŒ–å°‘ï¼Œå¯ä»¥é€‚å½“å»¶é•¿ï¼‰
   - å•†æˆ·æ•°æ®ï¼š60 ç§’ï¼ˆæ•°æ®å¯èƒ½æ›´é¢‘ç¹å˜åŒ–ï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ï¼‰

### ä¸‹ä¸€æ­¥å»ºè®®

1. **ç›‘æ§ç¼“å­˜æ•ˆæœ**ï¼š
   - ç›‘æ§æ•°æ®åº“è¯·æ±‚æ¬¡æ•°ï¼ŒéªŒè¯ç¼“å­˜æ•ˆæœ
   - ç›‘æ§ API å“åº”æ—¶é—´ï¼ŒéªŒè¯æ€§èƒ½æå‡

2. **å¯é€‰ä¼˜åŒ–**ï¼š
   - æ·»åŠ ç¼“å­˜æ¸…ç†æœºåˆ¶ï¼ˆå®šæœŸæ¸…ç†è¿‡æœŸç¼“å­˜ï¼‰
   - æ·»åŠ ç¼“å­˜ç»Ÿè®¡ï¼ˆç›‘æ§ç¼“å­˜å‘½ä¸­ç‡ï¼‰
   - è€ƒè™‘ä½¿ç”¨ React Query æˆ– SWR ç­‰ä¸“ä¸šç¼“å­˜åº“ï¼ˆå¦‚æœé¡¹ç›®è§„æ¨¡æ‰©å¤§ï¼‰

3. **æ•°æ®å®æ—¶æ€§**ï¼š
   - å¦‚æœæŸäº›åœºæ™¯éœ€è¦å®æ—¶æ•°æ®ï¼Œå¯ä»¥æ·»åŠ "å¼ºåˆ¶åˆ·æ–°"åŠŸèƒ½
   - æˆ–è€…ç¼©çŸ­ç‰¹å®šåœºæ™¯çš„ç¼“å­˜æ—¶é—´

---

## ğŸ“Œ æ€»ç»“

æœ¬æ¬¡ä¼˜åŒ–æˆåŠŸä¸ºå•†æˆ·é¡µé¢æ·»åŠ äº†å¤šå±‚ç¼“å­˜æœºåˆ¶ï¼Œé€šè¿‡ HTTP ç¼“å­˜å¤´ã€å‰ç«¯å†…å­˜ç¼“å­˜å’Œè¯·æ±‚å»é‡ä¸‰ä¸ªå±‚é¢ï¼Œæ˜¾è‘—å‡å°‘äº†æ•°æ®åº“è¯·æ±‚æ¬¡æ•°ï¼Œæå‡äº†æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚åœ¨ serverless ç¯å¢ƒä¸­ï¼Œè¿™ç§ç»„åˆæ–¹æ¡ˆæ—¢åˆ©ç”¨äº† CDN ç¼“å­˜ï¼Œåˆé€šè¿‡å‰ç«¯ç¼“å­˜æå‡äº†ç”¨æˆ·ä½“éªŒï¼Œæ˜¯é€‚åˆå½“å‰æ¶æ„çš„æœ€ä¼˜æ–¹æ¡ˆã€‚

**å½“å‰ç‰ˆæœ¬å·**: 2025-11-29 12:05:42

**ä¿®å¤çŠ¶æ€**: âœ… å·²å®Œæˆ

